<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Ganko Dice</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: #111;
  color: #fff;
  font-family: system-ui, -apple-system, BlinkMacSystemFont;
}

/* ğŸ² ã‚µã‚¤ã‚³ãƒ­æç”»ã‚¨ãƒªã‚¢ï¼ˆUIã‚’ç‰©ç†çš„ã«é™¤å¤–ï¼‰ */
#diceArea {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 96px;   /* â† ãƒœã‚¿ãƒ³åˆ†ã‚’ç¢ºä¿ */
}

/* æ–‡å­— */
.dice {
  position: absolute;
  font-size: 64px;
  font-weight: bold;
  user-select: none;
  pointer-events: none;
}

/* ğŸ”˜ UIå°‚ç”¨ãƒ¬ã‚¤ãƒ¤ */
#uiArea {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 96px;
  display: flex;
  justify-content: center;
  align-items: center;
  background: #111;
}

#rollBtn {
  padding: 16px 32px;
  font-size: 20px;
  border-radius: 12px;
  border: none;
  background: #ff9800;
  color: #000;
  cursor: pointer;
}
</style>
</head>

<body>

<div id="diceArea"></div>

<div id="uiArea">
  <button id="rollBtn">ğŸ² ã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã‚‹</button>
</div>

<script>
const symbols = ['ã¡', 'ã¾', 'ãŒ', 'ãŠ', 'ã†', 'ã‚“ã“'];

const diceArea = document.getElementById('diceArea');
const btn = document.getElementById('rollBtn');

/* ğŸ”Š ãƒ­ãƒ¼ã‚«ãƒ«éŸ³å£°ï¼ˆåŒã˜éšå±¤ã«ç½®ãï¼‰ */
const diceSound = new Audio('rpg-dice-rolling-95182 3.mp3');
diceSound.preload = 'auto';

const DICE_COUNT = 3;
const MIN_DIST = 90;
const MAX_TRIES = 50;

function isFarEnough(x, y, placed) {
  for (const p of placed) {
    const dx = x - p.x;
    const dy = y - p.y;
    if (Math.hypot(dx, dy) < MIN_DIST) {
      return false;
    }
  }
  return true;
}

function rollDice() {
  diceArea.innerHTML = '';

  // ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œç›´çµ â†’ éŸ³ãŒé³´ã‚‹
  diceSound.currentTime = 0;
  diceSound.play();

  const rect = diceArea.getBoundingClientRect();
  const w = rect.width;
  const h = rect.height;

  const placed = [];

  for (let i = 0; i < DICE_COUNT; i++) {
    let x, y, tries = 0;

    do {
      x = Math.random() * (w - 80);
      y = Math.random() * (h - 80);
      tries++;
    } while (!isFarEnough(x, y, placed) && tries < MAX_TRIES);

    placed.push({ x, y });

    const d = document.createElement('div');
    d.className = 'dice';
    d.textContent = symbols[Math.floor(Math.random() * symbols.length)];

    // ãƒ©ãƒ³ãƒ€ãƒ ãªåˆæœŸå›è»¢ã®ã¿ï¼ˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãªã—ï¼‰
    const rot = Math.floor(Math.random() * 360);
    d.style.left = x + 'px';
    d.style.top = y + 'px';
    d.style.transform = `rotate(${rot}deg)`;

    diceArea.appendChild(d);
  }
}

btn.addEventListener('click', rollDice);
</script>

</body>
</html>
